{% extends 'base.html' %}

{% load static i18n %}

{% block content %}

{% include 'partials/navbar.html' %}

<main>

	<!-- =======================
Page Banner START -->
	<section class="py-0">
		<div class="container">
			<div class="row mt-4 align-items-center">
				<div class="col-12">
					<!-- Card START -->
					<div class="card bg-light overflow-hidden px-sm-5">
						<div class="row align-items-center g-4">

							<!-- Content -->
							<div class="col-sm-9">
								<div class="card-body">
									<!-- Breadcrumb -->
									<nav aria-label="breadcrumb">
										<ol class="breadcrumb breadcrumb-dots mb-0">
											<li class="breadcrumb-item"><a href="/"><i
														class="bi bi-house me-1"></i>Accueil</a></li>
											<li class="breadcrumb-item">Détails de l'hôtel</li>
											<li class="breadcrumb-item active">Réservation</li>
										</ol>
									</nav>
									<!-- Title -->
									<h1 class="m-0 h2 card-title">Vérifiez votre réservation</h1>
								</div>
							</div>

							<!-- Image -->
							<div class="col-sm-3 text-end d-none d-sm-block">
								<img src="{% static 'images/element/17.svg' %}" class="mb-n4" alt="">
							</div>
						</div>
					</div>
					<!-- Card END -->
				</div>
			</div>
		</div>
	</section>
	<!-- =======================
Page Banner END -->

	<!-- =======================
Steps START -->
	<section>
		<div class="container">
			<div id="stepper" class="bs-stepper stepper-outline">
				<!-- Step Buttons START -->
				<div class="bs-stepper-header" role="tablist">
					<!-- Step 1 -->
					<div class="step" data-target="#step-1">
						<div class="text-center">
							<button type="button" class="btn btn-link step-trigger mb-0" role="tab" id="steppertrigger1"
								aria-controls="step-1">
								<span class="bs-stepper-circle">1</span>
							</button>
							<h6 class="bs-stepper-label d-none d-md-block">Revue des informations</h6>
						</div>
					</div>
					<div class="line"></div>

					<!-- Step 2 -->
					<div class="step" data-target="#step-2">
						<div class="text-center">
							<button type="button" class="btn btn-link step-trigger mb-0" role="tab" id="steppertrigger2"
								aria-controls="step-2">
								<span class="bs-stepper-circle">2</span>
							</button>
							<h6 class="bs-stepper-label d-none d-md-block">Informations voyageurs</h6>
						</div>
					</div>
					<div class="line"></div>

					<!-- Step 3 -->
					<div class="step" data-target="#step-3">
						<div class="text-center">
							<button type="button" class="btn btn-link step-trigger mb-0" role="tab" id="steppertrigger3"
								aria-controls="step-3">
								<span class="bs-stepper-circle">3</span>
							</button>
							<h6 class="bs-stepper-label d-none d-md-block">Effectuer le paiement</h6>
						</div>
					</div>
				</div>
				<!-- Step Buttons END -->

				<!-- Step content START -->
				<div class="bs-stepper-content p-0 pt-4">
					<div class="row g-4">

						<!-- Main content START -->
						<div class="col-xl-8">
              <form id="traveler-form" method="post" action="{% url 'pages:save_profile' %}">
                {% csrf_token %}
                <input type="hidden" name="trip_id" value="{{ trip.id }}">
								<!-- Step 1 content START -->
								<div id="step-1" role="tabpanel" class="content fade" aria-labelledby="steppertrigger1">
									<div class="vstack gap-4">
										<!-- Title -->
										<h4 class="mb-0">Tour Review</h4>

										<hr class="my-0"> <!-- Divider -->

										<!-- Tour list START -->
										<div class="card shadow rounded-2 overflow-hidden">
											<div class="row g-0">
												<!-- Image -->
												<div class="col-sm-6 col-md-4">
													<img src="{{ trip.image_url }}" class="" alt="">
												</div>

												<!-- Card Body START -->
												<div class="col-sm-6 col-md-8">
													<div class="card-body p-3">
														<!-- Title -->
														<h5 class="card-title mb-1"><a href="#">Visite {{ trip.arrival_city }} avec Asienantour</a></h5>
														<!-- Rating star -->
														<ul class="list-inline mb-0">
															{% for i in "12345" %}
															<li class="list-inline-item me-0 small">
																<i class="fa-solid fa-star {% if forloop.counter <= trip.rating|floatformat:0 %}text-warning{% else %}text-muted{% endif %}"></i>
															</li>
															{% endfor %}
														</ul>

														<!-- List -->
														<ul class="nav nav-divider small mb-0 mt-2">
															<li class="nav-item mb-1"><i class="far fa-calendar-alt me-2"></i>>Durée : {{ trip.duration }}</li>
															<li class="nav-item mb-1"><i class="fa-solid fa-car me-2"></i>Type de véhicule : {{ trip.vehicle_type }}</li>
															<li class="nav-item mb-1"><i class="bi bi-geo-alt-fill me-2"></i>Heure de départ : {{ trip.departure_time }}</li>
														</ul>
													</div>
												</div>
												<!-- Card body END -->
											</div>
										</div>
										<!-- Tour list END -->

										<!-- Flight detail START -->
										<div class="card border">
											<!-- Card header -->
											<div class="card-header border-bottom d-flex justify-content-between">
												<!-- Title -->
												<h5 class="mb-0">Détails du trajet</h5>
												<a href="#"
													class="btn btn-link p-0 mb-0 text-primary-hover text-reset text-decoration-underline">Voir
													détails</a>
											</div>

										</div>
                    <!-- Card body START -->
                    <!-- Card body START -->
                    <div class="card-body p-0">
                      <div class="row g-4">
                        <!-- Type de véhicule -->
                        <div class="col-md-3">
                          <!-- Image -->
                          <img src="{% static 'images/element/09.svg' %}"
                               class="w-80px mb-3" alt="">
                          <!-- Title -->
                          <h6 class="fw-normal small mb-0">{{ trip.vehicle_type }}</h6>
                        </div>

                        <!-- Départ -->
                        <div class="col-4 col-md-3">
                          <h5>{{ trip.departure_city }}</h5>
                          <h6 class="mb-0">{{ trip.departure_time }}</h6>
                        </div>

                        <!-- Durée -->
                        <div class="col-4 col-md-3 text-center">
                          <h6>{{ trip.duration }}</h6>
                          <div class="position-relative my-4">
                            <hr class="bg-primary opacity-5 position-relative">
                            <div class="icon-md bg-primary text-white rounded-circle position-absolute top-50 start-50 translate-middle">
                              <i class="fa-solid fa-fw fa-plane"></i>
                            </div>
                          </div>
                        </div>

                        <!-- Arrivée -->
                        <div class="col-4 col-md-3 text-end">
                          <h5>{{ trip.arrival_city }}</h5>
                          <h6 class="mb-0">{{ trip.arrival_time }}</h6>
                        </div>
                      </div>
                    </div>
                    <!-- Card body END -->
                    <!-- Card body END -->
										<!-- Flight detail END -->



										<!-- Cancellation & Date change START -->
										<div class="card border">
											<!-- Card header -->
											<div class="card-header border-bottom">
												<!-- Title -->
												<h5 class="mb-0">Annulation et changement de date</h5>
											</div>

											<!-- Card body START -->
                      <div class="card-body">
                        <ul class="list-group list-group-borderless">
                          <li class="list-group-item">
                            <span class="h6 fw-normal me-1 mb-0"><i class="bi bi-dot"></i>10 jours :</span>
                            <span>100%</span>
                          </li>
                          <li class="list-group-item">
                            <span class="h6 fw-normal me-1 mb-0"><i class="bi bi-dot"></i>10 à 15 jours :</span>
                            <span>75% + Frais Non Remboursables</span>
                          </li>
                          <li class="list-group-item">
                            <span class="h6 fw-normal me-1 mb-0"><i class="bi bi-dot"></i>15 à 30 jours :</span>
                            <span>30% + Frais Non Remboursables</span>
                          </li>
                          <li class="list-group-item">
                            <span class="h6 fw-normal me-1 mb-0"><i class="bi bi-dot"></i>Voyage :</span>
                            <span>100% en cas de billet non-remboursable</span>
                          </li>
                        </ul>
                        <p class="mt-2">Tous les prix sont en Francs CFA et sont susceptibles d'être modifiés sans préavis.<br>Dans le cas d'un forfait voyage inclus, le montant total du vol sera payable au moment de la réservation.</p>
                      </div>											<!-- Card body END -->
										</div>
										<!-- Cancellation & Date change END -->

										<!-- Step 1 button -->
										<div class="text-end">
											<button class="btn btn-primary next-btn mb-0">Next</button>
										</div>
									</div>
								</div>
								<!-- Step 1 content END -->
                <!-- Step 2 content START -->
                <div id="step-2" role="tabpanel" class="content fade" aria-labelledby="steppertrigger2">
                  <div class="vstack gap-4">
                    <h4 class="mb-0">Traveler Detail</h4>
                    <hr class="my-0">
                    <div class="alert alert-warning d-flex" role="alert">
                      <span class="alert-heading h5 mb-0 me-2"><i class="bi bi-exclamation-octagon-fill"></i></span>
                      Les infos ci-dessous sont obligatoires. (Pour chaque voyageur)
                    </div>

                    <!-- Traveler 1 form START -->
                    <div class="card border">
                      <div class="card-header border-bottom">
                        <h5 class="mb-0">Votre Profil</h5>
                      </div>
                      <div class="card-body">
                        <div class="row g-4">
                          <div class="col-md-2">
                            <label class="form-label">Titre</label>
                            <input type="text" class="form-control" name="title" required>
                          </div>
                          <div class="col-md-5">
                            <label class="form-label">Nom</label>
                            <input type="text" class="form-control" name="first_name" required>
                          </div>
                          <div class="col-md-5">
                            <label class="form-label">Prénoms</label>
                            <input type="text" class="form-control" name="last_name" required>
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Date de naissance</label>
                            <input type="text" class="form-control flatpickr" name="date_of_birth" data-date-format="Y-m-d" required>
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Email</label>
                            <input type="email" name="email" class="form-control form-control-lg" placeholder="Entrez votre email" required>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Traveler 1 form END -->

                    <div class="hstack gap-2 flex-wrap justify-content-between">
                      <button class="btn btn-secondary prev-btn mb-0" type="button">Previous</button>
                      <button class="btn btn-primary next-btn mb-0" type="button">Continue to payment</button>
                    </div>
                  </div>
                </div>
                <!-- Step 2 content END -->

                <!-- Step 3 content START -->
                <div id="step-3" role="tabpanel" class="content fade" aria-labelledby="steppertrigger3">
                  <div class="vstack gap-4">
                    <h4 class="mb-0">Payment options</h4>
                    <hr class="my-0">
                    <div class="card border">
                      <div class="card-header border-bottom d-sm-flex justify-content-between align-items-center">
                        <h5 class="mb-2 mb-sm-0">Credit or Debit Card</h5>
                      </div>
                      <div class="card-body">
                        <div class="row g-4">
                          <div class="col-12">
                            <label class="form-label">Card Number</label>
                            <input type="text" name="card_number" class="form-control" maxlength="16" placeholder="XXXX XXXX XXXX XXXX">
                          </div>
                          <div class="col-md-4">
                            <label class="form-label">Expiration Month</label>
                            <input type="text" name="card_expiry_month" class="form-control" maxlength="2">
                          </div>
                          <div class="col-md-4">
                            <label class="form-label">Expiration Year</label>
                            <input type="text" name="card_expiry_year" class="form-control" maxlength="4">
                          </div>
                          <div class="col-md-4">
                            <label class="form-label">CVV / CVC</label>
                            <input type="text" name="card_cvv" class="form-control" maxlength="3">
                          </div>
                          <div class="col-12">
                            <label class="form-label">Name of the cardholder</label>
                            <input type="text" name="cardholder_name" class="form-control">
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="d-flex justify-content-between">
                      <button class="btn btn-secondary prev-btn mb-0" type="button">Previous</button>
                      <button class="btn btn-success next-btn mb-0" type="submit">Pay now</button>
                    </div>
                  </div>
                </div>
                <!-- Step 3 content END -->
              </form>
						</div>
						<!-- Main content END -->
						<!-- Right sidebar START -->
						<aside class="col-xl-4">
							<div class="vstack gap-4">
								<!-- Price summary START -->
								<div class="card border">
									<!-- card header -->
									<div class="card-header border-bottom">
										<h5 class="card-title mb-0">Résumé du prix</h5>
									</div>

									<!-- Card body -->
<!--                  <div class="card-body">-->
<!--                    <ul class="list-group list-group-borderless">-->
<!--                      &lt;!&ndash; Prix de base &ndash;&gt;-->
<!--                      <li class="list-group-item d-flex justify-content-between align-items-center pt-0">-->
<!--                        <span class="h6 fw-light mb-0">Prix de base</span>-->
<!--                        <span class="fs-5">{{ price_base|floatformat:0 }} FCFA</span>-->
<!--                      </li>-->

<!--                      &lt;!&ndash; Remise &ndash;&gt;-->
<!--                      <li class="list-group-item d-flex justify-content-between align-items-center">-->
<!--                        <span class="h6 fw-light mb-0">-->
<!--                            Remise totale-->
<!--                            <span class="badge text-bg-danger smaller mb-0 ms-2">-->
<!--                                {{ trip.discount }}% off-->
<!--                            </span>-->
<!--                        </span>-->
<!--                        <span class="fs-5 text-success">-{{ remise|floatformat:0 }} FCFA</span>-->
<!--                      </li>-->

<!--                      &lt;!&ndash; Taxes &ndash;&gt;-->
<!--                      <li class="list-group-item d-flex justify-content-between align-items-center">-->
<!--                        <span class="h6 fw-light mb-0">Taxes & frais</span>-->
<!--                        <span class="fs-5">{{ taxes|floatformat:0 }} FCFA</span>-->
<!--                      </li>-->

<!--                      &lt;!&ndash; Total &ndash;&gt;-->
<!--                      <li class="list-group-item d-flex justify-content-between align-items-center border-top mt-2 pt-2">-->
<!--                        <span class="h6 fw-bold mb-0">Total</span>-->
<!--                        <span class="fs-5 fw-bold text-primary">{{ total|floatformat:0 }} FCFA</span>-->
<!--                      </li>-->
<!--                    </ul>-->
<!--                  </div>-->

									<!-- Card footer -->
									<div class="card-footer border-top">
										<div class="d-flex justify-content-between align-items-center">
											<span class="h5 mb-0">À payer maintenant</span>
											<span class="h5 mb-0">{{ trip.price }} FCFA</span>
										</div>
									</div>
								</div>
								<!-- Price summary END -->

								<!-- Book online START -->
								<div class="card border">
									<!-- card header -->
									<div class="card-header border-bottom">
										<h5 class="card-title mb-0">Faire une demande de voyage personalisé (Groupé)</h5>
									</div>

									<!-- Card body -->
									<div class="card-body">
										<div class="form-control-bg-light">
											<label class="form-label">Email</label>
											<input type="email" name="email_1" class="form-control form-control-lg" placeholder="Entrez votre email" value="{{ user.email }}">
										</div>
										<div class="mt-4 form-control-bg-light">
											<label class="form-label">Laissez nous un message </label>
                      <textarea class="form-control" rows="3" placeholder="Votre message ici..."></textarea>

										</div>
										<div class="d-grid mt-4">
											<button class="btn btn-primary next-btn mb-0">Envoyer une demande</button>
										</div>
									</div>
								</div>
								<!-- Book online END -->
							</div> <!-- Row END -->
						</aside>
						<!-- Right sidebar END -->

					</div>

				</div>
				<!-- Step content END -->
			</div>
		</div>
	</section>
	<!-- =======================
Steps END -->
</main>

{% include 'partials/footer.html' %}

{% endblock content %}
