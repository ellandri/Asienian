{% load static i18n %}

<div class="col-lg-4 col-xl-3">
  <!-- Responsive offcanvas body START -->
  <div class="offcanvas-lg offcanvas-end" tabindex="-1" id="sidebar-account">
    <!-- Offcanvas header -->
    <div class="offcanvas-header justify-content-end pb-2">
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#sidebarAccount"
              aria-label="Close"></button>
    </div>

    <!-- Offcanvas body -->
    <div class="offcanvas-body p-3 p-lg-0">
      <div class="card bg-light w-100">
        <!-- Edit profile button -->
        <div class="position-absolute top-0 end-0 p-3">
          <a href="{% url 'pages:dynamic_pages' template_name='account-profile' %}" class="text-primary-hover" data-bs-toggle="tooltip" data-bs-title="Edit profile">
            <i class="bi bi-pencil-square"></i>
          </a>
        </div>

        <!-- Card body START -->
        <div class="card-body p-3">
          {% if user.is_authenticated %}
          <!-- Avatar and content -->
          <div class="text-center mb-3">
            <!-- Avatar -->
            <div class="avatar avatar-xl mb-2">
              <img class="avatar-img rounded-circle border border-2 border-white"
                   src="{% if user.avatar %}{{ user.avatar.url }}{% else %}{% static 'images/avatar/01.jpg' %}{% endif %}"
                   alt="avatar">
            </div>
            <h6 class="mb-0">{{ user.name|default:user.username }}</h6>
            <a href="mailto:{{ user.email }}" class="text-reset text-primary-hover small">{{ user.email|default:'No email provided' }}</a>
            <hr>
          </div>

          <!-- Sidebar menu item START -->
          <ul class="nav nav-pills-primary-soft flex-column">
            <li class="nav-item">
              <a class="nav-link" href="{% url 'pages:dynamic_pages' template_name='account-profile' %}">
                <i class="bi bi-person fa-fw me-2"></i>My Profile
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'pages:my_bookings' %}">
                <i class="bi bi-ticket-perforated fa-fw me-2"></i>My Bookings
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="{% url 'pages:dynamic_pages' template_name='account-payment-details' %}">
                <i class="bi bi-wallet fa-fw me-2"></i>Payment Details
              </a>
            </li>
<!--            <li class="nav-item">-->
<!--              <a class="nav-link" href="{% url 'pages:dynamic_pages' template_name='account-wishlist' %}">-->
<!--                <i class="bi bi-heart fa-fw me-2"></i>Wishlist-->
<!--              </a>-->
<!--            </li>-->
<!--            <li class="nav-item">-->
<!--              <a class="nav-link" href="{% url 'pages:dynamic_pages' template_name='account-settings' %}">-->
<!--                <i class="bi bi-gear fa-fw me-2"></i>Settings-->
<!--              </a>-->
<!--            </li>-->
            <li class="nav-item">
              <a class="nav-link" href="{% url 'pages:dynamic_pages' template_name='account-delete' %}">
                <i class="bi bi-trash fa-fw me-2"></i>Delete Profile
              </a>
            </li>
            <li class="nav-item">
              <form method="post" action="{% url 'account_logout' %}">
                {% csrf_token %}
                <button type="submit" class="nav-link text-danger bg-danger-soft-hover border-0 bg-transparent">
                  <i class="fas fa-sign-out-alt fa-fw me-2"></i>Sign Out
                </button>
              </form>
            </li>
          </ul>
          <!-- Sidebar menu item END -->
          {% else %}
          <div class="text-center mb-3">
            <h6 class="mb-0">Guest</h6>
            <p class="small">Please log in to access your account.</p>
            <a href="{% url 'account_login' %}" class="btn btn-primary-soft">Log In</a>
          </div>
          {% endif %}
        </div>
        <!-- Card body END -->
      </div>
    </div>
  </div>
  <!-- Responsive offcanvas body END -->
</div>
