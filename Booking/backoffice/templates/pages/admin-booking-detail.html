{% extends 'admin.html' %}

{% load static i18n %}

{% block page_content %}
<!-- Page main content START -->
<div class="page-content-wrapper p-xxl-4">
	<!-- Title -->
	<div class="row">
		<div class="col-12 mb-4 mb-sm-5">
			<div class="d-sm-flex justify-content-between align-items-center">
				<h1 class="h3 mb-2 mb-sm-0">{{ room.name }}</h1>
				{% if trip.id %}
				<a href="{% url 'pages:trip_edit' trip.id %}" class="btn btn-primary-soft text-nowrap mb-0">
  <i class="bi bi-pencil-square fa-fw"></i> Modifier le voyage
</a>
				{% endif %}
			</div>
		</div>
	</div>

	<!-- Booking detail START -->
	<div class="row g-4 g-xl-5">
		<!-- Image -->
		<div class="col-xxl-6">
			<div class="row g-2 g-sm-4">
				{% for image in room.images %}
				<div class="col-6">
					<a data-glightbox data-gallery="gallery" href="{{ image.url }}">
						<div class="card card-element-hover card-overlay-hover overflow-hidden">
							<img src="{{ image.url }}" class="rounded-3" alt="">
							<div class="hover-element w-100 h-100">
								<i class="bi bi-fullscreen fs-6 text-white position-absolute top-50 start-50 translate-middle bg-dark rounded-1 p-2 lh-1"></i>
							</div>
						</div>
					</a>
				</div>
				{% endfor %}
			</div>
		</div>

		<!-- Content -->
		<div class="col-xxl-6">
			<h4><span class="fw-light">{% trans "Transport:" %} </span>{{ room.hotel_name }}</h4>
			<p class="fw-bold"><i class="bi bi-geo-alt me-2"></i>{{ room.hotel_address }}</p>
			<p class="mb-4">{{ room.description }}</p>

			<!-- Feature -->
			<div class="row g-4">
				<div class="col-sm-6 col-md-4">
					<div class="d-flex align-items-center">
						<div class="icon-lg bg-primary bg-opacity-10 text-primary rounded-2"><i class="fa-solid fa-bed"></i></div>
						<div class="ms-2">
							<small>{% trans "Type" %}</small>
							<h6 class="mb-0 mt-1">{{ room.type }}</h6>
						</div>
					</div>
				</div>
				<div class="col-sm-6 col-md-4">
					<div class="d-flex align-items-center">
						<div class="icon-lg bg-primary bg-opacity-10 text-primary rounded-2"><i class="fa-solid fa-arrow-right-arrow-left"></i></div>
						<div class="ms-2">
							<small>{% trans "Side" %}</small>
							<h6 class="mb-0 mt-1">{{ room.side }}</h6>
						</div>
					</div>
				</div>
				<div class="col-sm-6 col-md-4">
					<div class="d-flex align-items-center">
						<div class="icon-lg bg-primary bg-opacity-10 text-primary rounded-2"><i class="fa-solid fa-stairs"></i></div>
						<div class="ms-2">
							<small>{% trans "Floor" %}</small>
							<h6 class="mb-0 mt-1">{{ room.floor }}</h6>
						</div>
					</div>
				</div>
				<div class="col-sm-6 col-md-4">
					<div class="d-flex align-items-center">
						<div class="icon-lg bg-primary bg-opacity-10 text-primary rounded-2"><i class="fa-solid fa-mountain-sun"></i></div>
						<div class="ms-2">
							<small>{% trans "View" %}</small>
							<h6 class="mb-0 mt-1">{{ room.view }}</h6>
						</div>
					</div>
				</div>
				<div class="col-sm-6 col-md-4">
					<div class="d-flex align-items-center">
						<div class="icon-lg bg-primary bg-opacity-10 text-primary rounded-2"><i class="fa-regular fa-clone"></i></div>
						<div class="ms-2">
							<small>{% trans "Size" %}</small>
							<h6 class="mb-0 mt-1">{{ room.size }}</h6>
						</div>
					</div>
				</div>
			</div>

			<!-- Booking info -->
			{% if current_booking %}
			<div class="bg-light border border-secondary border-opacity-25 p-3 rounded d-inline-block mt-4">
				<h6 class="small">{% trans "Current Reservation:" %}</h6>
				<div class="d-sm-flex align-items-center">
					<div class="avatar avatar-xs flex-shrink-0">
						<img class="avatar-img rounded-circle" src="{{ current_booking.avatar_url }}" alt="avatar">
					</div>
					<h6 class="mb-0 ms-2">{{ current_booking.guest_name }}</h6>
				</div>
				<div class="hstack gap-4 gap-md-5 flex-wrap mt-2">
					<div>
						<small>{% trans "Check-in:" %}</small>
						<h6 class="fw-normal mb-0">{{ current_booking.checkin }}</h6>
					</div>
					<div>
						<small>{% trans "Check-out:" %}</small>
						<h6 class="fw-normal mb-0">{{ current_booking.checkout }}</h6>
					</div>
					<div>
						<small>{% trans "Total Amount:" %}</small>
						<h6 class="text-success mb-0">{{ current_booking.amount }}</h6>
					</div>
				</div>
			</div>
			{% endif %}
		</div>
	</div>
	<!-- Booking detail END -->

	<!-- Booking table START -->
	<div class="card shadow mt-5">
		<div class="card-header border-bottom">
			<h5 class="card-header-title">{% trans "Voyages" %}</h5>
		</div>
		<div class="card-body">
			<div class="row g-3 align-items-center justify-content-between mb-3">
				<div class="col-md-8">
					<form class="rounded position-relative">
						<input class="form-control pe-5" type="search" placeholder="{% trans 'Search' %}" aria-label="Search">
						<button class="btn border-0 px-3 py-0 position-absolute top-50 end-0 translate-middle-y" type="submit"><i class="fas fa-search fs-6"></i></button>
					</form>
				</div>
				<div class="col-md-3">
					<form>
						<select class="form-select js-choice" aria-label=".form-select-sm">
							<option value="">{% trans 'Sort by' %}</option>
							<option>{% trans 'Free' %}</option>
							<option>{% trans 'Newest' %}</option>
							<option>{% trans 'Oldest' %}</option>
						</select>
					</form>
				</div>
			</div>
			<div class="bg-light rounded p-3 d-none d-lg-block">
        <div class="row row-cols-7 g-4">
          <div class="col"><h6 class="mb-0">{% trans 'Réservé par' %}</h6></div>
          <div class="col"><h6 class="mb-0">{% trans 'Arrivée' %}</h6></div>
          <div class="col"><h6 class="mb-0">{% trans 'Départ' %}</h6></div>
          <div class="col"><h6 class="mb-0">{% trans 'Invité' %}</h6></div>
          <div class="col"><h6 class="mb-0">{% trans 'Montant' %}</h6></div>
          <div class="col"><h6 class="mb-0">{% trans 'Paiement' %}</h6></div>
          <div class="col"><h6 class="mb-0">{% trans 'Action' %}</h6></div>
        </div>
			</div>
			{% for booking in bookings %}
			<div class="row row-cols-xl-7 align-items-lg-center border-bottom g-4 px-2 py-4">
				<div class="col">
					<small class="d-block d-lg-none">{% trans 'Booked by:' %}</small>
					<div class="d-flex align-items-center">
						<div class="avatar avatar-xs flex-shrink-0">
							<img class="avatar-img rounded-circle" src="{{ booking.avatar_url }}" alt="avatar">
						</div>
						<div class="ms-2">
							<h6 class="mb-0 fw-light">{{ booking.guest_name }}</h6>
						</div>
					</div>
				</div>
				<div class="col">
					<small class="d-block d-lg-none">{% trans 'Check-in:' %}</small>
					<h6 class="mb-0 fw-normal">{{ booking.checkin }}</h6>
				</div>
				<div class="col">
					<small class="d-block d-lg-none">{% trans 'Check-out:' %}</small>
					<h6 class="mb-0 fw-normal">{{ booking.checkout }}</h6>
				</div>
				<div class="col">
					<small class="d-block d-lg-none">{% trans 'Guests:' %}</small>
					<h6 class="mb-0 fw-normal">{{ booking.guests }}</h6>
				</div>
				<div class="col">
					<small class="d-block d-lg-none">{% trans 'Amount:' %}</small>
					<h6 class="text-success mb-0">{{ booking.amount }}</h6>
				</div>
				<div class="col">
					<small class="d-block d-lg-none">{% trans 'Payment:' %}</small>
					<div class="badge {{ booking.payment_badge_class }}">{{ booking.payment_status }}</div>
				</div>
				<div class="col"><a href="#" class="btn btn-sm btn-light mb-0">{% trans 'View' %}</a></div>
			</div>
			{% if booking.available %}
			<div class="row row-cols-xl-7 align-items-lg-center border-bottom g-4">
				<div class="bg-light px-2 py-4 text-center">
					<h6 class="mb-0">{% trans booking.available_text %}</h6>
				</div>
			</div>
			{% endif %}
			{% endfor %}
		</div>
		<div class="card-footer pt-0">
			<div class="d-sm-flex justify-content-sm-between align-items-sm-center">
				<p class="mb-sm-0 text-center text-sm-start">{% trans "Showing" %} {{ pagination.start }} {% trans "to" %} {{ pagination.end }} {% trans "of" %} {{ pagination.total }} {% trans "entries" %}</p>
				<nav class="mb-sm-0 d-flex justify-content-center" aria-label="navigation">
					<ul class="pagination pagination-sm pagination-primary-soft mb-0">
						<li class="page-item {% if not pagination.has_prev %}disabled{% endif %}"><a class="page-link" href="#" tabindex="-1">{% trans "Prev" %}</a></li>
						{% for page in pagination.pages %}
						<li class="page-item {% if page.active %}active{% endif %} {% if page.disabled %}disabled{% endif %}"><a class="page-link" href="#">{{ page.number }}</a></li>
						{% endfor %}
						<li class="page-item {% if not pagination.has_next %}disabled{% endif %}"><a class="page-link" href="#">{% trans "Next" %}</a></li>
					</ul>
				</nav>
			</div>
		</div>
	</div>
	<!-- Booking table END -->
</div>
{% endblock page_content %}
